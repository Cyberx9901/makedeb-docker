# Maintainer: Cyber Anonymous <cyberx99@disroot.org>

pkgname=emacswk
pkgver=27.2
pkgrel=1
pkgdesc="GNU Emacs text editor with support for WebKit"
url="https://www.gnu.org/software/emacs/"
license=('GPL3')
arch=('amd64')
depends=('libwebkit2gtk-4.0-37' 'libjavascriptcoregtk-4.0-18' 'imagemagick' 'libmagickwand-dev' 'libotf0' 'libm17n-0')
makedepends=('autoconf' 'automake' 'autotools-dev' 'build-essential' 'git' 'gnutls-dev' 'gtk-doc-tools' 'libgtk-3-dev' 'libasound2-dev' 'libgconf2-dev' 'libgpm-dev' 'libgtk-3-dev' 'libjpeg-dev' 'libm17n-dev' 'libncurses5-dev' 'libotf-dev' 'libpng-dev' 'librsvg2-dev' 'libselinux1-dev' 'libtiff5-dev' 'libtool' 'libwebkit2gtk-4.0-dev' 'libx11-dev' 'libxml2-dev' 'libxpm-dev' 'libxrandr-dev' 'libxrender-dev' 'libxt-dev' 'texinfo' 'unzip' 'wget' 'xaw3dg-dev' 'zlib1g-dev' 'libgif-dev')
source=("https://ftp.gnu.org/gnu/emacs/emacs-$pkgver.tar.xz")
sha256sums=('b4a7cc4e78e63f378624e0919215b910af5bb2a0afc819fad298272e9f40c1b9')

build() {
    cd emacs-$pkgver
    ./configure --with-modules --with-x-toolkit=gtk3 --with-xwidgets --with-cairo --with-imagemagick --with-json --with-nativecomp --with-gnutls --with-harfbuzz --with-mailutils --with-xml2 --with-sound --with-x --with-xpm --with-jpeg --with-png --with-gif --with-tiff --with-webkit2
    make -j$(nproc)
}

package() {
    cd emacs-$pkgver
    make DESTDIR="$pkgdir" install
}
